<!DOCTYPE html>
<html lang="es">
<head>
    <title>UrMusic - Resultados de canciones</title>
    <meta charset="UTF-8">
    <link href="../static/style.css" rel="stylesheet" type="text/css">
    <link href="../static/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
    <link href="../static/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
    <link href="../static/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
    <link href="../static/favicon/site.webmanifest" rel="manifest">
</head>
<body>

<div class="background" style="z-index: -1;">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
</div>
<header>
    <h1>UrMusic✧</h1>
    <h2>Recomendaciones basadas en tu canción preferida</h2>
</header>

<div id="results">
    <h3>Resultados de búsqueda para: <span id="searched-song"></span></h3>
    <ul id="artist-list">
        <!-- Aquí van a estar los resultados -->
    </ul>
</div>

<div id="follow-us">
    <p>Siguenos</p>
    <a href="https://www.instagram.com/urmusic_corp/" target="_blank">
        <img src="../static/Icons/instagram-icon.svg" alt="Instagram" style="height: 24px;">
    </a>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        const urlParams = new URLSearchParams(window.location.search);
        const song = urlParams.get('song');
        $('#searched-song').text(song);

        $.ajax({
            url: 'http://127.0.0.1:5000/get_similar_artists',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({song: song}),
            success: function (data) {
                let artistList = $('#artist-list');
                artistList.empty();
                data.artists.forEach(function (artist) {
                    artistList.append(`<li>${artist.name} - Mood: ${artist.mood}, Genre: ${artist.genre}</li>`);
                });
            }
        });
    });
</script>
</body>
</html>
